<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/echarts/4.3.0-rc.2/echarts.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <title>echarts-issues</title>
</head>

<body align="center">
    <div>
        <h1>问题复现</h1>
        <p style="color:red">复现操作：鼠标悬浮到地图，观察分组名，全都是第一个系列的名称</p>
        <p>
            <span>issues 链接:</span>
            <a
                href="https://github.com/apache/incubator-echarts/issues/11347"><span>https://github.com/apache/incubator-echarts/issues/11347</span></a>
        </p>
        <p>
            <a href="https://github.com/yc111/echarts-issues/blob/master/index.html"><span>查看源码</span></a>
        </p>

    </div>

    <div id="main" style="width: 600px; height:400px; margin: 0 auto;"></div>

    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('main'));
        $.getJSON('./data/china.json', function (data) {
            echarts.registerMap('china', data);

            var option = {
                color: ['#469fe3', '#766baa'],
                tooltip: {
                    trigger: 'item',
                    showDelay: 0,
                    transitionDuration: 0.2,
                    /**
                     * 掉formatter，分组就可以正确对应
                     * */
                    formatter: function (params) {
                        // console.log(params);
                        /**
                         * params.seriesName 不能跟所在分组对上
                         * */
                        return params.name + '<br />' + params.seriesName
                    }
                },
                visualMap: {
                    left: 'right',
                    min: 0,
                    max: 100,
                    inRange: {
                color: ['#469fe3', '#766baa']
                    },
                    text: ['High', 'Low'],
                    calculable: true
                },
                legend: {
                    data: ['分组1', '分组2']
                },
                series: [{
                    name: '分组1',
                    type: 'map',
                    map: 'china',
                    data: [{
                        name: "新疆",
                        value: 30
                    }]
                }, {
                    name: '分组2',
                    type: 'map',
                    map: 'china',
                    data: [{
                        name: "西藏",
                        value: 80
                    }]
                }]
            };

            myChart.setOption(option);
        })
    </script>
</body>

</html>